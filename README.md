# Polkabind - Kotlin

**Seamless interaction with any Polkadot-SDK-based chain from Kotlin / Android**

---

## Overview  

`Polkabind` opens the Polkadot ecosystem to languages other than Rust.  
It surfaces wallet-level functionalityâ€”key management, balance queries, extrinsics, signing, RPC, event subscriptions and moreâ€”by exposing the **[Subxt](https://github.com/paritytech/subxt)** Rust library over FFI.

This repository contains the **Kotlin / Android** bindings:

* **AAR** with pre-built native .so slices (`arm64-v8a`, `armeabi-v7a`)  
* Kotlin glue generated by **UniFFI**  
* Minimal Gradle module ready to drop into any Android project (or be published to your own Maven repo)

---

## High-Level Workflow (Android flavour)

```mermaid
flowchart TD
  subgraph CORE["**polkabind**  (Rust + Subxt faÃ§ade)"]
      A[Push / Tag vX.Y.Z]
  end

  subgraph CORE_CI["Core repo CI  (GitHub Actions)"]
      B1["Cross-compile .so slices â†´\n  â€¢ arm64-v8a  â€¢ armeabi-v7a"] --> B2["Generate Kotlin glue ðŸ”§ UniFFI"]
      B2 --> B3["Bundle AAR + Gradle skeleton"]
      B3 -->|git push & tag| B4["Mirror into **polkabind-kotlin-pkg**"]
  end

  subgraph KOT_REPO["**polkabind-kotlin-pkg**  (repo)"]
      C["New commit + tag vX.Y.Z"]
  end

  subgraph KOT_CI["Kotlin repo CI  (GitHub Actions)"]
      D1["Zip package"] --> D2["Create GitHub Release\nðŸ“¦ polkabind-kotlin-pkg.zip"]
  end

  subgraph CONSUMER["Android app / Gradle build"]
      E["implementation(\"dev.polkabind:polkabind-android:X.Y.Z\")"]
  end

  A --> CORE_CI --> B4 --> C --> KOT_CI --> D2 --> E
  classDef repo      fill:#f9f9f9,stroke:#bbb
  classDef pipeline  fill:#eef3ff,stroke:#87a9ff
  classDef release   fill:#e8fce8,stroke:#78c878
  class CORE, KOT_REPO repo
  class CORE_CI, KOT_CI pipeline
  class D2 release
  ```

# Show me the code

Here's what it looks like to use `Polkabind` in Swift:

## Classic Subxt (Rust)

``` rust
// build the address, compose the dynamic call,
// sign, submit, watch for finality â€¦
let dst = Value::variant(
    "Id",
    Composite::unnamed(vec![Value::from_bytes(arr)]),
);
let client = OnlineClient::<PolkadotConfig>::from_url(url).await?;
let tx = dynamic_call(
    "Balances",
    "transfer_allow_death",
    vec![dst, Value::u128(amount)],
);
client
    .tx()
    .sign_and_submit_then_watch_default(&tx, &signer)
    .await?
    .wait_for_finalized_success()
    .await?;
```

## Polkabind (Kotlin)
```kotlin
// one blocking FFI call â€“ done ðŸŽ‰
Polkabind.doTransfer(
    destHex = destHex,
    amount  = amt
).await()
```

Behind the scenes Polkabind executes the exact same Rust (left column) while exposing a single, idiomatic Kotlin API backed by coroutines.

## Integrating

``` groovy
repositories { mavenCentral() }            // or your own Maven repo
dependencies {
    implementation("dev.polkabind:polkabind-android:<version>")
}
```

The AAR already contains:
- libpolkabind.so for arm64-v8a and armeabi-v7a
(dropping legacy x86 slices saves several MB)
- Kotlin glue sources (dev.polkabind.*)
- Transitive JNA & kotlinx-coroutines dependencies

## Status

This is a *work-in-progress*, please visit [polkabind.dev](https://polkabind.dev) for a summary of the expected roadmap.

## License

Polkabind is licensed under the Apache License, Version 2.0 (see LICENSE).

### Third-Party Licenses and Attributions

Polkabind uses Subxt, which is dual-licensed under either:
    â€¢ Apache License, Version 2.0, or
    â€¢ GNU General Public License v3.0 (or later)

Polkabind explicitly elects to use Subxt under the terms of the Apache License, Version 2.0.
